# üè° Airbnb Clone - RESTful API Documentation

## 1. Authentication API

### POST /api/auth/register
**Description:** Register a new user  
**Body:**
```json
{
  "name": "John Doe",
  "email": "john@example.com",
  "password": "123456",
  "role": "host" // or "guest"
}
```
**Response:**
```json
{
  "message": "User registered successfully",
  "userId": "652aa..."
}
```

---

### POST /api/auth/login
**Description:** Login user  
**Body:**
```json
{
  "email": "john@example.com",
  "password": "123456"
}
```
**Response:**
```json
{
  "token": "jwt_token_here",
  "user": {
    "_id": "652aa...",
    "name": "John Doe",
    "role": "guest"
  }
}
```

---

### GET /api/auth/profile
**Description:** Get current user profile (JWT required)  
**Header:** `Authorization: Bearer <token>`

**Response:**
```json
{
  "_id": "652aa...",
  "name": "John Doe",
  "email": "john@example.com",
  "role": "guest"
}
```

---

## 2. Listing API

### GET /api/listings
**Description:** Get all listings with filters  
**Query Params:**
- `city`: filter by city  
- `price_min`: minimum price  
- `price_max`: maximum price  
- `limit`: pagination size  
- `page`: page number

**Response:**
```json
[
  {
    "_id": "653bc...",
    "title": "Luxury Apartment",
    "price_per_night": 1000000,
    "location": "Hanoi",
    "host": { "_id": "652aa...", "name": "Alice" }
  }
]
```

---

### POST /api/listings
**Description:** Host creates new listing  
**Body:**
```json
{
  "title": "Cozy Apartment",
  "description": "Near the lake, very quiet",
  "price_per_night": 800000,
  "city": "Hanoi",
  "address": "123 Hoang Hoa Tham",
  "max_guests": 2
}
```
**Response:**
```json
{
  "message": "Listing created successfully",
  "listingId": "653bc..."
}
```

---

### GET /api/listings/:id
**Description:** Get listing details by ID

---

### PUT /api/listings/:id
**Description:** Update listing info (Host only)

---

### DELETE /api/listings/:id
**Description:** Delete a listing (Host only)

---

## 3. Booking API

### POST /api/bookings
**Description:** Create booking for a listing  
**Body:**
```json
{
  "listing_id": "653bc...",
  "check_in": "2025-10-20",
  "check_out": "2025-10-25",
  "guests": 2
}
```
**Response:**
```json
{
  "message": "Booking created successfully",
  "booking_id": "654cc..."
}
```

---

### GET /api/bookings
**Description:** Get all bookings of current user

---

### GET /api/bookings/:id
**Description:** Get booking details

---

### DELETE /api/bookings/:id
**Description:** Cancel booking (Guest only)

---

## 4. Review API

### POST /api/reviews
**Description:** Add review for a listing  
**Body:**
```json
{
  "listing_id": "653bc...",
  "rating": 5,
  "comment": "Amazing place!"
}
```
**Response:**
```json
{
  "message": "Review added successfully"
}
```

---

### GET /api/reviews/:listing_id
**Description:** Get all reviews for a listing

---

## 5. Message API (Inbox)

### POST /api/messages
**Description:** Send a message between host and guest  
**Body:**
```json
{
  "receiver_id": "652aa...",
  "content": "Is your place available next weekend?"
}
```

### GET /api/messages/:conversation_id
**Description:** Get messages in a conversation

---

## 6. Payment API

### POST /api/payments
**Description:** Make payment for a booking  
**Body:**
```json
{
  "booking_id": "654cc...",
  "amount": 5000000,
  "method": "credit_card"
}
```

---

## 7. Admin API

### GET /api/admin/users
**Description:** Get all users (Admin only)

### GET /api/admin/statistics
**Description:** Get overall statistics (total bookings, revenue, active users)

---

**Author:** Auto-generated by ChatGPT (GPT-5)  
**Date:** 2025-10-13
